<html>
    <head>

        <script type = "text/javascript" 
         src = "{{ url_for('static', filename = 'diff.js') }}" ></script>
         <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
         <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
         <meta name="viewport" content="width=320, initial-scale=1" />

    </head>
    <body>
        <nav>
            <h1>Capitol Differ</h1>
            <button onclick="location.href = 'https://capitoldiffer.com//about';" >
                <strong>About</strong>
            </button>
        </nav>
        <article class="grid-container">
            <div class = "text_box_padding">
                <h3>Select Congresses to compare</h3>

                <select name="congress_1" id="congress_1" class = "selectors" onchange="changeInCongress()">
                    {% for c in Congress_List %}
                        <option value={{c}}>{{c + " Congress"}}</option>
                    {% endfor %}
                </select>


                <select name="congress_2" id="congress_2" class = "selectors" onchange="changeInCongress()">
                    {% for c in Congress_List %}
                        <option value={{c}}>{{c + " Congress"}}</option>
                    {% endfor %}
                </select>

            </div>
            <div id="statistics">
                <div>
                    <h3><span id="speaker_now_header"> 117th</span> Congress</h3>
                    <p>Speaker: <span id="speaker_now">Nancy Pelosi</span></p>
                    <p>House Majority: <span id="current_party">Democratic</span></p>
                </div>
                <div>
                    <h3><span id="speaker_then_header"> 117th </span> Congress</h3>
                    <p>Speaker: <span id="speaker_then">Nancy Pelosi</span></p>
                    <p>House Majority: <span id="previous_party">Democratic</span></p>

                </div>

        
            </div>

            <div class = "text_box_padding rules_box">
                <h3>Select rule to compare</h3>
                <button id="rule_flip" class="button_smaller" onclick="flip_rules()">Switch to pre-105th Congress Rules</button>
                <p><i>
                    Due to the rules consolidation between the 105th and 106th Congress it is impossible to compare pre-105th and post-105th rules. 
                    Click the button above to change between the pre and post rules.
                </i></p>
            </div>
            
        
        </article>

        <article class = "grid-container-other-article">

            <button onclick="generateDiff()" class="button">Compare</button>

        </article>
        <article class = "grid-container-other-article">
            <h3>The difference between the rules</h3>
            <p id="diff_text"></p>

            <h3>Legend</h3>
            <p style="color: green; font-weight: 900;">This is text that was added.</p>
            <p style="color: red; text-decoration: line-through;">This is text that was removed.</p>
            </body>

            <h3>The rule for the <span id="rule_change_first_congress"></span> Congress</h3>
            <p id="old_text"></p>

            <h3>The rule for the <span id="rule_change_second_congress"></span> Congress</h3>
            <p id="new_text"></p>

        </article>

        <script>

            const nested_rules = {
                "RULE I. THE SPEAKER":[
      "Approval of the Journal",
      "Preservation of order",
      "Control of Capitol facilities",
      "Signature of documents",
      "Questions of order",
      "Form of a question",
      "Discretion to vote",
      "Speaker pro tempore",
      "Other responsibilities",
      "Designation of travel",
      "Committee appointment",
      "Recess and Convening Authorities",
      "Term limit",
      "Declaration of recess",
      "Journal; Speaker's approval.",
      "Speaker preserves order on floor in galleries and lobby",
      "Speaker's control of the Hall, corridors, and rooms",
      "Speaker's signature to acts, warrants, subpoenas, etc.; and decision of questions of order subject to appeal",
      "Putting of the question by the Speaker.",
      "Voting viva voce, by division, by electronic device",
      "Postponing rollcall votes on passage.",
      "Speaker pro tempore.",
      "Four-term limit.",
      "Travel authority.",
      "Broadcasting of House proceedings.",
      "Office of the Historian.",
      "Office of General Counsel.",
      "Authority to declare recesses.",
      "Drug testing in the House.",
      "Full Rule for: THE SPEAKER"
   ],
   "II. OTHER OFFICERS AND OFFICIALS":[
      "Elections",
      "Clerk",
      "Sergeant-at-Arms",
      "Chief Administrative Officer",
      "Chaplain",
      "Office of Inspector General",
      "Office of the Historian",
      "Office of General Counsel",
      "Office of Diversity and Inclusion",
      "Office of the Whistleblower Ombuds",
      "Full Rule for: OTHER OFFICERS AND OFFICIALS"
   ],
   "III. THE MEMBERS, DELEGATES, AND RESIDENT COMMISSIONER OF PUERTO RICO":[
      "Voting",
      "Delegates and the Resident Commissioner",
      "Full Rule for: THE MEMBERS, DELEGATES, AND RESIDENT COMMISSIONER OF PUERTO RICO"
   ],
   "IV. HALL OF THE HOUSE.":[
      "Use of the Hall of the House.",
      "Full Rule for: HALL OF THE HOUSE."
   ],
   "V. BROADCASTING THE HOUSE":[
      "BROADCASTING THE HOUSE",
      "Full Rule for: BROADCASTING THE HOUSE"
   ],
   "VI. OFFICIAL REPORTERS AND NEWS MEDIA GALLERIES":[
      "Official reporters",
      "News media galleries",
      "Full Rule for: OFFICIAL REPORTERS AND NEWS MEDIA GALLERIES"
   ],
   "VII. RECORDS OF THE HOUSE":[
      "Archiving",
      "Public availability",
      "Definition of record",
      "Withdrawal of papers",
      "Full Rule for: RECORDS OF THE HOUSE"
   ],
   "VIII. RESPONSE TO SUBPOENAS":[
      "RESPONSE TO SUBPOENAS",
      "Full Rule for: RESPONSE TO SUBPOENAS"
   ],
   "IX. QUESTIONS OF PRIVILEGE":[
      "QUESTIONS OF PRIVILEGE",
      "Definition of questions of privilege.",
      "Precedence of questions of privilege.",
      "Full Rule for: QUESTIONS OF PRIVILEGE"
   ],
   "X. ORGANIZATION OF COMMITTEES":[
      "Committees and their legislative jurisdictions",
      "Committee on Agriculture",
      "Committee on Appropriations",
      "Committee on Armed Services",
      "Committee on the Budget",
      "Committee on Education and Labor",
      "Committee on Energy and Commerce",
      "Committee on Ethics",
      "Committee on Financial Services",
      "Committee on Foreign Affairs",
      "Committee on Homeland Security",
      "Committee on House Administration",
      "Committee on Natural Resources",
      "Committee on Oversight and Reform",
      "Committee on Rules",
      "Committee on Science, Space, and Technology",
      "Committee on Small Business",
      "Committee on Transportation and Infrastructure",
      "Committee on Veteransâ€™ Affairs",
      "Committee on Ways and Means",
      "General oversight responsibilities",
      "Special oversight functions",
      "Additional functions of committees",
      "Budget Act responsibilities",
      "Election and membership of standing committees",
      "Expense resolutions",
      "Interim funding",
      "Travel",
      "Committee staffs",
      "Select and joint committees",
      "Permanent Select Committee on Intelligence",
      "Committee on the Judiciary",
      "Committee on Standards of Official Conduct",
      "Committees and their legislative jurisdiction",
      "Full Rule for: ORGANIZATION OF COMMITTEES"
   ],
   "XI. PROCEDURES OF COMMITTEES AND UNFINISHED BUSINESS":[
      "In general",
      "Adoption of written rules",
      "Regular meeting days",
      "Additional and special meetings",
      "Temporary absence of chair",
      "Committee records",
      "Prohibition against proxy voting",
      "Open meetings and hearings",
      "Quorum requirements",
      "Limitation on committee sittings",
      "Calling and questioning of witnesses",
      "Hearing procedures",
      "Supplemental, minority, additional, or dissenting views",
      "Power to sit and act; subpoena power",
      "Committee on Ethics",
      "Committee agendas",
      "Committee staff",
      "Meetings and hearings",
      "Public disclosure",
      "Requirements to constitute a complaint",
      "Duties of chair and ranking minority member regarding properly filed complaints",
      "Duties of chair and ranking minority member regarding information not constituting a complaint",
      "Investigative and adjudicatory subcommittees",
      "Standard of proof for adoption of statement of alleged violation",
      "Subcommittee powers",
      "Due process rights of respondents",
      "Committee reporting requirements",
      "Audio and visual coverage of committee proceedings",
      "Pay of witnesses",
      "Unfinished business of the session",
      "Supplemental, minority, or additional views",
      "Committee on Standards of Official Conduct",
      "Temporary absence of chairman",
      "Duties of chairman and ranking minority member regarding properly filed complaints",
      "Duties of chairman and ranking minority member regarding information not constituting a complaint",
      "Due process rights of respondents and witnesses",
      "Committee reporting requirement",
      "Investigative hearing procedures",
      "Full Rule for: PROCEDURES OF COMMITTEES AND UNFINISHED BUSINESS"
   ],
   "XII. RECEIPT AND REFERRAL OF MEASURES AND MATTERS":[
      "Messages",
      "Referral",
      "Petitions, memorials, and private bills",
      "Prohibition on commemorations",
      "Excluded matters",
      "Sponsorship",
      "Executive communications",
      "Petitions, memorials, and private bill",
      "Full Rule for: RECEIPT AND REFERRAL OF MEASURES AND MATTERS"
   ],
   "XIII. CALENDARS AND COMMITTEE REPORTS":[
      "Calendars",
      "Filing and printing of reports",
      "Content of reports",
      "Availability of reports",
      "Privileged reports, generally",
      "Privileged reports by the Committee on Rules",
      "Resolutions of inquiry",
      "Estimates of major legislation",
      "Full Rule for: CALENDARS AND COMMITTEE REPORTS"
   ],
   "XIV. ORDER AND PRIORITY OF BUSINESS":[
      "ORDER AND PRIORITY OF BUSINESS",
      "Full Rule for: ORDER AND PRIORITY OF BUSINESS"
   ],
   "XV. BUSINESS IN ORDER ON SPECIAL DAYS":[
      "Suspensions",
      "Discharge motions",
      "Adverse report by the Committee on Rules, second and fourth Mondays",
      "Private Calendar",
      "Calendar Call of Committees, Wednesdays",
      "Consensus Calendar",
      "District of Columbia business, second and fourth Mondays",
      "Discharge motions, second and fourth Mondays",
      "Private Calendar, first and third Tuesdays",
      "Suspensions, Mondays and Tuesdays",
      "Corrections Calendar, second and fourth Tuesdays",
      "Full Rule for: BUSINESS IN ORDER ON SPECIAL DAYS"
   ],
   "XVI. MOTIONS AND AMENDMENTS":[
      "Motions",
      "Withdrawal",
      "Question of consideration",
      "Precedence of motions",
      "Divisibility",
      "Amendments",
      "Germaneness",
      "Readings",
      "Full Rule for: MOTIONS AND AMENDMENTS"
   ],
   "XVII. DECORUM AND DEBATE":[
      "Decorum",
      "Recognition",
      "Managing debate",
      "Call to order",
      "Comportment",
      "Exhibits",
      "Galleries",
      "Congressional Record",
      "Legislative Proceedings",
      "Secret sessions",
      "Full Rule for: DECORUM AND DEBATE"
   ],
   "XVIII. THE COMMITTEE OF THE WHOLE HOUSE ON THE STATE OF THE UNION":[
      "Resolving into the Committee of the Whole",
      "Measures requiring initial consideration in the Committee of the Whole",
      "Order of business",
      "Reading for amendment",
      "Quorum and voting",
      "Dispensing with the reading of an amendment",
      "Closing debate",
      "Striking the enacting clause",
      "Concurrent resolution on the budget",
      "Applicability of Rules of the House",
      "Unfunded mandates",
      "Full Rule for: THE COMMITTEE OF THE WHOLE HOUSE ON THE STATE OF THE UNION"
   ],
   "XIX. MOTIONS FOLLOWING THE AMENDMENT STAGE":[
      "Previous question",
      "Recommit",
      "Reconsideration",
      "Full Rule for: MOTIONS FOLLOWING THE AMENDMENT STAGE"
   ],
   "XX. VOTING AND QUORUM CALLS":[
      "VOTING AND QUORUM CALLS",
      "Postponement of proceedings",
      "Five-minute votes",
      "Automatic yeas and nays",
      "Ballot votes",
      "Postponement of proceeding",
      "Full Rule for: VOTING AND QUORUM CALLS"
   ],
   "XXI. RESTRICTIONS ON CERTAIN BILLS":[
      "Reservation of certain points of order",
      "General appropriation bills and amendments",
      "Appropriations on legislative bills",
      "Tax and tariff measures and amendments",
      "Consideration of retroactive tax rate increases",
      "Designation of public works",
      "Passage of tax rate increases",
      "Transportation obligation limitations",
      "Full Rule for: RESTRICTIONS ON CERTAIN BILLS"
   ],
   "XXII. HOUSE AND SENATE RELATIONS":[
      "Senate amendments",
      "Conference reports; amendments reported in disagreement",
      "Full Rule for: HOUSE AND SENATE RELATIONS"
   ],
   "XXIII. CODE OF OFFICIAL CONDUCT":[
      "CODE OF OFFICIAL CONDUCT",
      "Full Rule for: CODE OF OFFICIAL CONDUCT"
   ],
   "XXIV. LIMITATIONS ON USE OF OFFICIAL FUNDS":[
      "Limitations on use of official and unofficial accounts",
      "Limitations on use of the frank",
      "Prohibition on use of funds by Members not elected to succeeding Congress",
      "Full Rule for: LIMITATIONS ON USE OF OFFICIAL FUNDS"
   ],
   "XXV. LIMITATIONS ON OUTSIDE EARNED INCOME AND ACCEPTANCE OF GIFTS":[
      "Outside earned income; honoraria",
      "Copyright royalties",
      "Definitions",
      "Gifts",
      "Claims against the Government",
      "Full Rule for: LIMITATIONS ON OUTSIDE EARNED INCOME AND ACCEPTANCE OF GIFTS"
   ],
   "XXVI. FINANCIAL DISCLOSURE":[
      "FINANCIAL DISCLOSURE",
      "Persons Required to File",
      "Contents of Reports",
      "Filing of Reports",
      "Failure to File or Filing False Reports",
      "Custody of and Public Access to Reports",
      "Review of Reports",
      "Confidential Reports and Other Additional Requirements",
      "Authority of Comptroller General",
      "Definitions",
      "Notice of Actions Taken to Comply with Ethics Agreements",
      "Administration of Provisions",
      "Custody of and Public",
      "Administration of Provision",
      "Financial report disclosing certain financial interests.",
      "Full Rule for: FINANCIAL DISCLOSURE"
   ],
   "XXVII. DISCLOSURE BY MEMBERS AND STAFF OF EMPLOYMENT NEGOTIATIONS":[
      "DISCLOSURE BY MEMBERS AND STAFF OF EMPLOYMENT NEGOTIATIONS",
      "Full Rule for: DISCLOSURE BY MEMBERS AND STAFF OF EMPLOYMENT NEGOTIATIONS"
   ],
   "XXVIII. STATUTORY LIMIT ON THE PUBLIC DEBT":[
      "STATUTORY LIMIT ON THE PUBLIC DEBT",
      "Full Rule for: STATUTORY LIMIT ON THE PUBLIC DEBT"
   ],
   "XXIX. GENERAL PROVISIONS":[
      "GENERAL PROVISIONS",
      "Full Rule for: GENERAL PROVISIONS"
   ]
}   

    const nested_rules_older = {'I. DUTIES OF THE SPEAKER': ['Journal speakers approval', "Speaker's control of the hall, corridors, and rooms", "Speaker's signature to acts, warrants, subpoenas, etc.; and decision of questions order subject to appeal", 'Putting of the question by the speaker', 'Postponing rollcall votes on passage', 'Speaker pro tempore', 'Four-term limit', 'Travel Authority', 'Broadcasting of house proceedings', 'Office of the historian', 'Office of general counsel', 'Authority to declare recesses', 'Drug testing in the house', 'Speaker preserves order on floor and in galleries and lobby', "The speaker's vote, tie vote", 'Speakers control over the hall, corridors and rooms', 'Putting off the question by the speaker', 'Bicentennial office and historian of the house', 'Trvael authority', 'Calling the house to order; and approval of journal', "Speaker's control of the hall, corridors and rooms"], 'II. ELECTION OF OFFICERS': ['Election, oath, and removal of officers', 'Election of officers'], 'III. DUTIES OF THE CLERK': ['Clerks duties at organization', 'Clerk furnishes a list of reports', 'Clerks duty as to Journal and documents', 'Official to act as Clerk upon designation', 'Authority to receive messages', "Administration of vacant Member's office", 'Semi-annual reports', 'Cooperation with others', 'Clerk', 'Clerk furnished a list of reports', "Clerk's duty as to journal and documents. "], 'IV. DUTIES OF THE SERGEANT-AT-ARMS': ['Sergeant-at-Arms enforces authority of House', "The mace the symbol of the Sergeant-at-Arms' office", 'Doorkeeping', 'Semi-annual reports', 'Cooperation with others', "The mace, the symbol of the Sargeant-at-Arms' office", 'Sargeant-at-Arms enforces authority of the House'], 'IX. QUESTIONS OF PRIVILEGE': ['Definition of questions of privilege', 'Precedence of questions of privilege', 'Definition and Precedence of Questions of Privilege'], 'L. PROCEDURE FOR RESPONSE TO SUBPOENAS': ['Response to Subpoenas'], 'LI. EMPLOYMENT PRACTICES': ['Gift rule', 'Employment Practices', '"Ramseyer Rule."'], 'LII. APPLICATION OF CERTAIN LAWS': ['Office of Compliance'], 'OFFICE OF INSPECTOR GENERAL': ['Inspector General'], 'V. DUTIES OF THE DOORKEEPER': ['Duties', 'Semi-annual reports', 'Cooperation with others', 'General duties of the Doorkeeper', 'The Doorkeeper clears the floor of unauthorized persons'], 'VI. ADMINISTRATIVE OFFICIALS': ['Inspector General', 'Duties', 'Semi-annual reports', 'Cooperation with others', 'Administrative Officials'], 'VI. DUTIES OF THE POSTMASTER': ['The Postmaster superintends the House post office'], 'VII. DUTIES OF THE CHAPLAIN': ['Duties of the Chaplain'], 'VIII. DUTIES OF THE MEMBERS': ['Members required to be present and vote', 'Pairs', 'Voting', 'Members Required to be present and vote', 'Personal Interest'], 'X. ESTABLISHMENT AND JURISDICTION OF STANDING COMMITTEES': ['Number and jurisdiction of standing committees', 'Agriculture', 'Appropriations', 'Banking and Financial Services', 'Budget Composition of', 'Jurisdiction and duties', 'Commerce', 'Education and Labor', 'Government Reform and Oversight', 'House Oversight', 'International Relations', 'Judiciary', 'Internal Security', 'National Security', 'Resources', 'Rules', 'Science, Space, and Technology', 'Small Business', 'Standards of Official Conduct', 'Transportation and Infrastructure', "Veteran's Affairs", 'Ways and Means', 'Committee on Appropriations; budget hearings', 'Procedure for budget hearings', 'Budget Act; 15-day referral to Appropriations', 'Budget', 'Enrolled bills', 'Direction of officers', 'Acceptance of gifts', 'Approval of certain settlements', 'Standard Official Conduct; additional duties', 'Annual appropriations', 'Concurrent resolution on Budget', 'Reconciliation process', 'Referral procedures', 'Electing committees', 'Party membership as basis for election', 'Committee chairmen', 'Requirement for subcommittees', 'Select and conference committees', 'Party membership as basis for appointment', 'Delegates and Resident Commissioner', 'General oversight', 'Special oversight', 'Appropriations Committee; Budget Hearings', 'Procedure for Budget Hearings', 'Budget Act; 15-day Referral to Appropriations', 'Direction of Officers', 'Standards of Official Conduct; additional duties', 'Armed Services', 'Budget, Composition of', 'District of Columbia', 'Government Operations', 'House Administration', 'Merchant Marine and Fisheries', 'Natural Resources', 'Post Office and Civil Service', 'Public Works and Transportation', "Veterans' Affairs", 'Number and jurisdiction of Standing Committees', 'Interior and Insular Affairs', 'General Oversight', 'Special Oversight', 'Appropriations Committee, Budget Hearings', 'Procedure for Budget Hearing', 'Budget Act; 15-Day Refferal to Appropriation', 'Enrolled Bills', 'Travel of Members', 'Scheduling Service', 'Standards of Official Conduct; Additional Duties', 'Annual Appropriations', 'Concurrent Resolution on Budget', 'Reconciliation Process', 'Referral Procedures', 'Electing Committees', 'Party Membership as Basis for Election', 'Committee Chariman', 'Requirement for Subcommittees', 'Select and Conference Committees', 'Party Membership as Basis for Appointment', 'Deligates and Resident Commissioner', 'Aging', 'Budget, composition of', 'Jurisdiction and Duties', 'Government Operation', 'Merchant, Marine and Fisheries. ', 'Post Office and Civi Service', "Veteran's Affair", 'Budget Hearings', 'Budget Act procedures', 'Referral Procedures. ', 'Committee Chairmen', 'Requirement for subcommittees\\', 'Budget hearings', 'Scheduling service', 'Banking Finance and Urban Affairs', 'Armed services', 'Government operations', 'House administration', 'Budget hearing', 'Reconcilliation process', 'Select and conference Committees', 'Composition of', 'Interstate and Foreign Commerce', 'Travel Members', 'Budget. Composition of', 'Post Office and Civil service', 'Standards of Official Conduct; Additional duties', 'Concurent resolution on Budget', 'Banking, Currency and Housing', 'Internal security', 'Rules. ', "Veterans' Affair"], 'X. STANDING COMMITTEES': ['Election of standing committees', 'Names and numbers of the standing committees', 'Speaker appoints select and conference committees', 'Select Committee on Small Business', 'Selection of chairman of committee', 'Committee vacancies', 'Names and numbers of the standing commitees', 'Select committees on small businesses'], 'XI. POWERS AND DUTIES OF COMMITTEES': ['Jurisdiction of committees', 'Agriculture', 'Appropriations', 'Armed Services', 'Banking and Currency', 'District of Columbia', 'Education and Labor', 'International Relations', 'Government Operations', 'House Administration', 'Interior and Insular Affairs', 'Internal Security', 'Interstate and Foreign Commerce', 'Judiciary', 'Merchant Marine and Fisheries', 'Post Office and Civil Service', 'Public Works', 'Rules', 'Science, Space, and Technology', 'Standards of Official Conduct', "Veteran's Affairs", 'Ways and Means', 'Privileged reports of committees', 'Privilege of reports from Committee on Rules, and limitations thereon', 'Election contests', 'Committee meeting', 'Rules of Committee Procedure', 'Legislative overnight by committees', 'Committee staffs', 'Reports of committee expenditures', 'Committees (except certain) not to sit during five-minute rule', 'Committee expense resolutions', 'Broadcasting of committe hearings', 'Armed services', 'Merchant, Marine, and Fisheries', "Veterans' Affairs", 'Legislative oversight by the committees', 'Reports of Committee expenditures', 'Committees (except certain) not to sit during 5-minute rule', 'Broadcasting of committee hearings'], 'XI. RULES OF PROCEDURES FOR COMMITTEES': ['Committee procedure', 'Investigative authority', 'Printing and binding', 'Activity reports', 'Committee rules', 'Commitee meetings', 'Required records', 'Public availability', 'Committee files', 'Ban on proxies', 'Quorum of two; of one-third', 'Committees not to sit', "Chairman's duty", 'Filing by majority of committee', 'Requirement of quorum', 'Vote on reporting', 'Content of reports', 'Constitutional authority', 'Minority views', 'Three-day layover', 'Administration of oaths to witnesses', 'Committee travel', 'Travel reports', 'Media coverage', 'When permitted', 'Press photographers', 'Accreditation', 'Reports from committee on rules', 'Filing reports', 'Comparative print', 'Specifying waivers', 'Primary expense solution', 'Additional expense resolution', 'Exception for certain initial funding', 'Funds for committee staffs; expense resolutions', 'Travel by members not reelected', 'Interim funding', 'Thirty professional staff', 'Minority', 'Staff duties', '"associate" or "shared" staff', 'Pay', 'Staff, committees on appropriations', 'Non-partisan staff', 'Inflationary impact', 'Primary expense resolution', 'Availability of report', 'Exception for cetain initial funding', 'Votes in committees', 'Use of proxies', 'Eighteen professional staff', 'Clerical staff', 'Staff committees on appropriations, and budget', 'Committees permited to sit without leave', 'Funds for committee staffs; expense resolution', 'Investigative authorithy', 'Filing reports. ', 'Travel by members not relected', 'Professional staff', 'Appropriation bills; summary report', 'Accrediation', 'Investigate authority', 'Appropriation bills: summary reports', 'Whea permitted', 'Filling reports', 'Funds for committee staffs: expense resolutions', 'Votes on committees', 'Postponed votes', 'Votes in committee', 'Use of proxies. ', 'Comperative print', 'Professional staffs', 'Staff, committees on appropriations and budget', 'Reports on staff'], 'XII. RESIDENT COMMISSIONER AND DELEGATES.': ['Delegates and the Resident Commissioner', 'Powers and Privileges of Resident Commissioner and Delegates as to committee service'], 'XIII. CALENDARS AND COMMITTEE REPORTS': ['Calendar for reports of committees', 'Nonprivileged reports filed with the clerk', 'Ramseyer rule', 'Corrections calendar', 'Motion to discharge', 'Calendars printed', 'Estimate of cost', 'Consent calendar', 'Nonprivileged reports filled with the clerk', 'Nonprivileged reports file with the clerk', 'Calendar printed', 'Calendars for reports of committees'], 'XIV. OF DECORUM AND DEBATE': ['Obtaining the floor for debate; and relevancy and decorum therein', "Speaker's power of recognition", 'The hour rule in debate', 'The opening and closing of general debate', 'The call to order', 'Words taken down', 'Member to speak but once to the same question; right to close controlled debate', 'Decorum of members in the hall', 'Gallery occupants not to be introduced', 'Revisions of remarks in debate', 'Standard of conduct', 'The opening and closing of debate', 'Member to speak but once to the same question', 'Obtaining the floor for debate; and relevancy, and decorum therein', 'Gallery occupations not to be introduced'], 'XIX. OF AMENDMENTS': ['Amendments to Text and Title'], 'XL. EXECUTIVE COMMUNICATIONS': ['Reception and reference of executive communication, including estimates'], 'XLI. QUALIFICATIONS OF OFFICERS AND EMPLOYEES': ['Officers and employees not to be agents of claims'], 'XLII. GENERAL PROVISIONS': ["Relations of Jefferson's Manual and Legislative Reorganization Act of 1946 to the rules of the House"], 'XLIII. CODE OF OFFICIAL CONDUCT': ['Official Conduct of Members, Officers or Employees of the House'], 'XLIV. FINANCIAL DISCLOSURE': ['Financial report disclosing certain financial interests'], 'XLIX. ESTABLISHMENT OF STATUTORY LIMIT ON THE PUBLIC DEBT': ['Public Debt Limit'], 'XLVII. LIMITATIONS ON OUTSIDE EMPLOYMENT AND EARNED INCOME': ['Income limitations'], 'XLVIII. PERMANENT SELECT COMMITTEE ON INTELLIGENCE': ['Permanent Select Committee on Intelligence'], 'XV. ON CALLS OF THE ROLL AND HOUSE': ['Call of the roll for the yea-and-nay vote', 'The call of the house', 'Quorum call by clerks', 'Count of those not voting to make a quorum of record on a roll call', 'The call of the house in the new form', 'Use of electronic equipment in recording roll calls', '"15-and-5" voting', 'Quorum: when not required', "Speaker's discretion to recognize for motion for call of house", 'Yeas and nays ordered on certain questions', 'Call of the house; recording presence by clerks', 'The call of the house in the old form', 'Dispensing with call; sign-in procedure'], 'XVI. ON MOTIONS, THEIR PRECEDENCE, ETC': ['Motions reduced to writing and entered on the journal', 'Stating and withdrawing of motions', 'The question of consideration', 'Precedence of privileged motions', 'Entry of hour of adjournment on the journal', 'Division of the question', 'Motion to strike out and insert not divisible', 'Germane amendments', 'Dilatory motions pending motions to suspend rules', 'Privileged motion for consideration of revenue and appropriation bills', 'Dilatory motions', 'Stating and withdrawing of motion', 'Entry of hour of ajournment on the journal'], 'XVII. DECORUM AND DEBATE': ['Obtaining the floor for debate; and relevancy and decorum therein', "Speaker's power of recognition", 'The hour rule in debate', 'The opening and closing of general debate', 'The call to order for words spoken in debate', 'Member to speak but once to the same question; right to close controlled debate', 'Decorum of Members in the Hall', 'Gallery occupants not to be introduced', 'Revisions of remark in debate', 'Standard of conduct'], 'XVII. PREVIOUS QUESTION': ['The previous question', 'Relation of previous question to failure of a quorum', 'Questions of order pending the motion for the previous question'], 'XVIII. RECONSIDERATION': ['The motion to reconsider', 'Application of motion to reconsider to bills in committees', 'Requirement that reports of committee be in writing and be printed'], 'XVIII. THE COMMITTEE OF THE WHOLE HOUSE ON THE STATE OF THE UNION': ['Selection of Chairman Committee of the Whole; and his power to preserve order', "Speaker's declaration into Committee of the Whole pursuant to special order", 'Failure of a quorum in Committee of the Whole', 'Five-minute votes on amendments in sequence', 'Subjects requiring consideration in Committee to the Whole', 'Order of business in Committee of the Whole', 'General debate and amendment under the five-minute rule in Committee of the Whole', 'Motion to dispense with reading', 'Unfunded mandates', 'Closing the five-minute debate in Committee of the Whole', 'The motion to strike out the enacting words of a bill', 'Reading concurrent resolution on budget for amendment', 'Subjects requiring consideration in committee of the whole', 'Application of rules of the house to the committee of the whole'], 'XX. OF AMENDMENTS OF THE SENATE': ['Consideration of Senate amendments in Committee of the Whole; motion for conference', 'Conferees may not agree to certain Senate amendments', 'Consideration of Senate amendments in Committee of the Whole', 'Consideration of Senate Amendments in Committee of the Whole', 'Conferees May not Agree to Certain Senate Amendments', 'Considertaion of Senate amendments in Committee of the Whole', 'Conferees may not agree to certain in Senate amendments', 'Conferees power with respect to non-germane Senate amendments'], 'XX.OF AMENDMENTS OF THE SENATE': ['Consideration of senate amendments in committee of the whole; motion for conference', 'Conferees may not agree to certain senate amendments'], 'XXI. ON BILLS': ['Reading, engrossment, and passage of bills', 'Unauthorized appropriations in reported general appropriation bills or amendments thereto', 'Legislation in reported general appropriation bills; exceptions', 'Legislation or limitations in amendments to general appropriation bills', 'Motion to rise and report as preferential to limitation or retrenchment amendments', 'Designated emergencies in reported appropriation bills', 'Offsetting amendments en bloc to appropriation bills', 'Content of reports on appropriation bills', 'Restriction on the reference of claims', 'Restriction of power to report appropriations', 'Restriction on bills and amendments carrying taxes or tariffs', 'Three-fifths vote to increase income tax rates', 'Prohibition against retroactive income tax rate increase', 'Reappropriations prohibited', 'Printed hearings and reports on appropriation bills', 'Reservation of points of order', 'Unauthorized appropriation in reported general appropriation bills or amendments thereto', ' motion to rise and report as preferential to limitation or retrenchment amendments', 'Restriction of power to report appropriation', 'Unauthorized appropriations and legislation on general appropriation bills', 'Reading,engrossment and passage of bills', 'Unauthorized appropriations and legislation on general appropriation bills ', 'Restriction of the reference of claims', 'Restriction on bills and amendments carrying taxes ans tariffs', 'Reappropiations prohibited', 'Printed hearings and reports on appropriatioin bills', 'Reading, engrossment, and passage of bills. ', 'Restriction on bills and amendments carrying taxes or tarrifs', 'Printed hearings and repots on appropriation bills', 'Printed hearings and reports on appropriation billls', 'Reading engrossment, and passage of bills'], 'XXII. OF PETITIONS, MEMORIALS, BILLS, AND RESOLUTIONS': ['Introduction and reference of petitions, memorials, and private bills', 'Certain private and commemorative bills prohibited', 'Correction of errors in reference; and relation to jurisdiction', 'Introduction, reference, and change of reference of public bills, memorials, and resolutions', 'Resolution of inquiry', 'Introduction of bills, resolutions, or memorials by request', 'Certain private bills prohibited', 'Correction of errors in reference;  and relation to jurisdiction', 'Introduction, reference, and change of reference of public bills, memorials, and resolution', 'Resolutions of inquiry', 'Introduction , reference, and change of reference of public bills, memorials, and resolutions', 'Introduction of bills, resolutions, or memorials, by request', 'Introduction of bills, resolutions, or memorials bu request'], 'XXIII. OF COMMITTEES OF THE WHOLE HOUSE': ['Selection of chairman of committee of the whole; and his power to preserve order', "Speaker's declaration into committee of the whole pursuant to special order", 'Failure of a quorum in committee of the whole', 'Five-minute votes on amendments in sequence', 'De novo votes where delegates decisive', 'Subjects requiring consideration in committee of the whole', 'Order of business in committee of the whole', 'General debate and amendment under the five-minute rule in committee of the whole', 'Motion to dispense with reading', 'Closing the five-minute debate in committee of the whole', 'Reading concurrent resolution on budget for amendment', 'Application of rules of the house to the committee of the whole', 'Speakers declaration into committee of the whole persuant to special order', 'The motion to strike out the enacting words of the bill', 'Failure of a quorum in the committee of the whole', 'General debate and amendment under the five-minute rule in comittee of the whole', 'The motion to strike out the enacting words of a bill', 'Reading concurrent resolution in budget for amendment', 'Subjects requiring consideration on committee of the whole', 'Application of rule of the house to the committee of the whole'], 'XXIV. ORDER OF BUSINESS': ['The rule for the order of business in the house', "Disposal of business on the speaker's table", 'Unfinished business', 'The morning hour for the call of committees', 'Interruption of the call of committees by motion to go into committee of the whole house on the state of the union', 'Interruption of the regular order on tuesdays for consideration of the private calendar', 'Calendar wednesday business', 'District of columbia', 'The rule for the order of business in the house. ', "Disposal of  business on the speaker's table", 'Interuption of the regular order on tuesdays for consideration of the private calendar', 'Interruption of the call of committees by motion to go into committe of the whole house on the state of the union'], 'XXIX. MESSAGES': ['Entry of messages in the Journal and Record'], 'XXIX. SECRET SESSION': ['Secret session of the House'], 'XXV. PRIORITY OF BUSINESS': ['Decision of questions as to priority of business without debate'], 'XXVI. UNFINISHED BUSINESS OF THE SESSION': ['Resumption of business of a preceding session'], 'XXVII. CHANGE OR SUSPENSION OF RULES': ['Motions to suspend the rules', 'The forty minutes of debate on motion to suspend the rules', 'Motion to discharge a committee', 'The second of the motion to suspend the rules'], 'XXVIII. CONFERENCE REPORTS': ['High privilege of conference reports; and form of accompanying statement', 'Time for debate on motions to instruct', 'Motions privileged after 20 calendar days of conference', 'The statement accompanying a conference report', 'Consideration of conference reports', 'Consideration of amendments in disagreement', 'Certain motions to insist as preferential', 'Certain conference reports considered as read', 'Conferees may report germane modification of amendment in nature of substitute', 'Nongermane matter in conference agreements', 'Nongermane matter in amendments in disagreement', 'Open conference meetings', 'Time for debate', 'Printing of conference reports and statements in the record', 'Open conference meeting', 'The conferees may report germane modification of amendment in nature of substitute', 'High privilege of conference report; and form of accompanying statement'], 'XXX. READING OF PAPERS': ['Objection to Reading of Papers'], 'XXX. USE OF EXHIBITS': ['Objections to use of exhibits'], 'XXXI. HALL OF THE HOUSE': ['Use of the Hall of the House'], 'XXXII. OF ADMISSION TO THE FLOOR': ['Persons and officials admitted to the floor during sessions of the House', 'Admission to the floor when the House is not sitting', 'Former Members and officers', "Members' staff", 'Prohibition on distribution of campaign contributions', 'Person and officials admitted to the floor during sessions of the House'], 'XXXIII. OF ADMISSION TO THE GALLERIES': ['The various galleries and admission thereto'], 'XXXIV. OFFICIAL AND OTHER REPORTERS': ['Reporters of debates and committee stenographers', 'Unofficial reporters in the press gallery and on the floor', 'Unofficial reporters in the radio gallery and on the floor'], 'XXXIX. MESSAGES': ['Entry of messages in the Journal and Record'], 'XXXV. PAY OF WITNESSES': ['Fees of witnesses before the House or committees'], 'XXXVI. PAPERS': ['Duties of Clerk and committees as to custody of papers before committees'], 'XXXVII. WITHDRAWAL OF PAPERS': ['Custody of papers in the files of the House'], 'XXXVIII. BALLOT': ['Elections by ballot']}

    // For post 105th rules
    const select_nested = document.createElement("select");
    select_nested.setAttribute('id', 'rule_selector');
    select_nested.setAttribute( "onchange", "checkDiff()" );

    // loop through the optgroups and add them to the <select> element
    for (var groupName in nested_rules) {
    // create the optgroup
    var optgroup = document.createElement("optgroup");
    optgroup.label = groupName;

    // loop through the options in the optgroup and add them to the optgroup
    for (var i = 0; i < nested_rules[groupName].length; i++) {
        var option = document.createElement("option");
        option.value = nested_rules[groupName][i];
        option.text = nested_rules[groupName][i];
        optgroup.appendChild(option);
    }

    // add the optgroup to the <select> element
        select_nested.appendChild(optgroup);
    }
    // for pre 105th rules
    const select_nested_older = document.createElement("select");
    select_nested_older.setAttribute('id', 'rule_selector');
    select_nested_older.setAttribute( "onchange", "checkDiff()" );



    // loop through the optgroups and add them to the <select> element
    for (var groupName in nested_rules_older) {
    // create the optgroup
    var optgroup = document.createElement("optgroup");
    optgroup.label = groupName;

    // loop through the options in the optgroup and add them to the optgroup
    for (var i = 0; i < nested_rules_older[groupName].length; i++) {
        var option = document.createElement("option");
        option.value = nested_rules_older[groupName][i];
        option.text = nested_rules_older[groupName][i];
        optgroup.appendChild(option);
    }

    // add the optgroup to the <select> element
        select_nested_older.appendChild(optgroup);
    }
    
    document.querySelector(".rules_box").appendChild(select_nested)
    const status_span = document.createElement("span");
    status_span.setAttribute('id', 'status_span');
    document.querySelector(".rules_box").appendChild(status_span)
    
    // Flip between old and new ones    
    function flip_rules(){
        console.log("Flipping rules")
        let rule_flip_button = document.getElementById("rule_flip")

        console.log(rule_flip_button.innerHTML)
        if(rule_flip_button.innerHTML === "Switch to pre-105th Congress Rules"){

            // remove element here
            document.getElementById("rule_selector").remove()

            rule_flip_button.innerHTML = "Switch to post-105th Congress Rules"
            document.querySelector(".rules_box").appendChild(select_nested_older)

        } else if(rule_flip_button.innerHTML === "Switch to post-105th Congress Rules"){

            // remove element here
            document.getElementById("rule_selector").remove()

            rule_flip_button.innerHTML = "Switch to pre-105th Congress Rules"
            document.querySelector(".rules_box").appendChild(select_nested)

        }
    }
            
    function changeInCongress(){

        const congresses_with_party = [
        {Congress: "117th", Party: "Democratic", Speaker: "Nancy Pelosi"},
        {Congress: "116th", Party: "Democratic", Speaker: "Nancy Pelosi"},
        {Congress: "115th", Party: "Republican", Speaker: "Paul Ryan"},
        {Congress: "114th", Party: "Republican", Speaker: "Paul Ryan"},
        {Congress: "113th", Party: "Republican", Speaker: "John Boehner"},
        {Congress: "112th", Party: "Republican", Speaker: "John Boehner"},
        {Congress: "111th", Party: "Democratic", Speaker: "Nancy Pelosi"},
        {Congress: "110th", Party: "Democratic", Speaker: "Nancy Pelosi"},
        {Congress: "109th", Party: "Republican", Speaker: "John Dennis Hastert"},
        {Congress: "108th", Party: "Republican", Speaker: "John Dennis Hastert"},
        {Congress: "107th", Party: "Republican", Speaker: "John Dennis Hastert"},
        {Congress: "106th", Party: "Republican", Speaker: "John Dennis Hastert"},
        {Congress: "105th", Party: "Republican", Speaker: "Newt Gingrich"},
        {Congress: "104th", Party: "Republican", Speaker: "Newt Gingrich"},
        {Congress: "103rd", Party: "Democratic", Speaker: "Tom Foley"},
        {Congress: "102nd", Party: "Democratic", Speaker: "Tom Foley"},
        {Congress: "101st", Party: "Democratic", Speaker: "Tom Foley"},
        {Congress: "100th", Party: "Democratic", Speaker: "Jim Wright"},
        {Congress: "99th", Party: "Democratic", Speaker: "Tip O'Neill"},

            ]

        first_year = document.getElementById('congress_1')
        second_year = document.getElementById('congress_2')


        let congress_first = congresses_with_party.filter(d => d.Congress == first_year.value)[0]
        let congress_second = congresses_with_party.filter(d => d.Congress == second_year.value)[0]
        console.log(`${congress_first.Party} to ${congress_second.Party}` )

        let congress_first_int = parseInt(congress_first.Congress.replace("th", ""))
        let congress_second_int = parseInt(congress_second.Congress.replace("th", ""))

        /*
        if (congress_first_int > congress_second_int){
            
            let party_change_element = document.getElementById("party_change")
            
            if(congress_second.Party === congress_first.Party){
                party_change_element.innerHTML = `No. ${congress_second.Party} to ${congress_first.Party}`;
            } else {
                party_change_element.innerHTML = `Yes. ${congress_second.Party} to ${congress_first.Party}`;
            }
        } else {
            let party_change_element = document.getElementById("party_change")
            if(congress_second.Party === congress_first.Party){ 
                party_change_element.innerHTML = `No. ${congress_first.Party} to ${congress_second.Party}`;
            } else {
                party_change_element.innerHTML = `Yes. ${congress_first.Party} to ${congress_second.Party}`;
            }
        }
        */
        let speaker_now_element = document.getElementById("speaker_now")
        let speaker_then_element = document.getElementById("speaker_then")

        speaker_now_element.innerHTML = congress_first.Speaker
        speaker_then_element.innerHTML = congress_second.Speaker

        let speaker_now_header_element = document.getElementById("speaker_now_header")
        let speaker_then_header_element = document.getElementById("speaker_then_header")

        speaker_now_header_element.innerHTML = congress_first.Congress
        speaker_then_header_element.innerHTML = congress_second.Congress

        let rule_change_first_congress_element = document.getElementById("rule_change_first_congress")
        let rule_change_second_congress_element = document.getElementById("rule_change_second_congress")

        rule_change_first_congress_element.innerHTML = congress_first.Congress
        rule_change_second_congress_element.innerHTML = congress_second.Congress


        // Updating the first cell

        document.getElementById("current_party").innerHTML = congress_first.Party

        // Updating the second cell

        console.log(congress_second)
        document.getElementById("previous_party").innerHTML = congress_second.Party


    }
    
        async function generateDiff(){
                first_year = document.getElementById('congress_2')
                second_year = document.getElementById('congress_1')
                
                first_rule = document.getElementById('rules_1')
                first_rule_new = document.getElementById("rule_selector").value

                if (first_year.value !== second_year.value){
                
                    res_1 = await fetch(`/api?congress=${first_year.value}&title=${first_rule_new}`)          
                    res_2 = await fetch(`/api?congress=${second_year.value}&title=${first_rule_new}`)

                    if (res_1.status === 200 && res_2.status === 200){

                    obj_1 = await res_1.json();
                    obj_2 = await res_2.json();


                    console.log(obj_1)
                    console.log(obj_2)

                    document.getElementById("new_text").innerHTML = obj_1.Result
                    document.getElementById("old_text").innerHTML = obj_2.Result

                    const diff = JsDiff.diffWordsWithSpace(obj_1.Result, obj_2.Result)
                    console.log(diff)
                    const display = document.getElementById('diff_text');
                    display.innerHTML = '';
                    const fragment = document.createDocumentFragment();
                    diff.forEach((part) => {
                        // green for additions, red for deletions
                        // grey for common parts

                        // bold for new. Strike out for old

                        console.log(part.added)
                        console.log(part.removed)

                        const size = part.added ? '900' : '400' // style.fontWeight
                        const underline = part.removed ? 'line-through': 'none'  // style.textDecoration

                        const color = part.added ? 'green' :
                            part.removed ? 'red' : 'grey';

                        span = document.createElement('span');
                        span.style.color = color;
                        span.style.fontWeight = size;
                        span.style.textDecoration = underline;
                        span.appendChild(document
                            .createTextNode(part.value));
                        fragment.appendChild(span);
                    });

                    display.appendChild(fragment);
                } else {
                    alert("Rule does not exist in both years. Try different years")
                }
            } else {
                alert("Congresses are the same years. Pick a different Congresses.")
            }

        }

        async function checkDiff() {
                first_year = document.getElementById('congress_2')
                second_year = document.getElementById('congress_1')
                
                first_rule = document.getElementById('rules_1')
                first_rule_new = document.getElementById("rule_selector").value

                if (first_year.value !== second_year.value){
                
                    res_1 = await fetch(`/api?congress=${first_year.value}&title=${first_rule_new}`)          
                    res_2 = await fetch(`/api?congress=${second_year.value}&title=${first_rule_new}`)

                    if (res_1.status === 200 && res_2.status === 200){

                    obj_1 = await res_1.json();
                    obj_2 = await res_2.json();
                    
                    const new_text = obj_1.Result;
                    const old_text = obj_2.Result

                    let status_span = document.getElementById("status_span")
                    if(new_text === old_text){
                        console.log("No change in text")
                        status_span.innerHTML = "No change in text"
                    } else {
                        console.log("Change in text")
                        status_span.innerHTML = "Change in text"
                    }

                    
                } else {
                    alert("Rule does not exist in both years. Try different years")
                }
            } else {
                alert("Congresses are the same years. Pick a different Congresses.")
            }
        }

            
                 
                
            

        </script>
</html>